<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Recetas Base de la Masa — Panificación Colombres</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=IBM+Plex+Mono:wght@400;600&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <script src="../../Arquitectura/config.js"></script>
    <script src="../../Arquitectura/config-sheets.js"></script>
    <script src="../../Arquitectura/sheets/receta-base/receta-base-sheets-base.js"></script>
    <script src="../../Arquitectura/sheets/receta-base/sheets-listar-receta-base.config.js"></script>
    <script src="../armador-receta-hub.config.js"></script>
    <script>window.RECETA_BASE_ACCION_ACTUAL = "listar"; window.ARMADOR_RECETA_SUBMODULO_ACTUAL = "receta-base";</script>
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        :root {
            --bg:           #f5f6f8;
            --surface:      #ffffff;
            --surface-2:    #f0f1f4;
            --border:       #e2e5ec;
            --border-2:     #d0d4dd;
            --accent:       #2563eb;
            --accent-light: #eff4ff;
            --green:        #16a34a;
            --green-dim:    rgba(22,163,74,0.08);
            --amber:        #d97706;
            --amber-dim:    rgba(217,119,6,0.08);
            --text-primary:   #111827;
            --text-secondary: #4b5563;
            --text-muted:     #9ca3af;
            --font-display: 'DM Serif Display', Georgia, serif;
            --font-mono:    'IBM Plex Mono', monospace;
            --font-body:    'Inter', sans-serif;
            --radius: 8px;
            --shadow:    0 1px 3px rgba(0,0,0,0.07), 0 1px 2px rgba(0,0,0,0.04);
            --shadow-md: 0 4px 12px rgba(0,0,0,0.09);
            --safe-top:    env(safe-area-inset-top, 0);
            --safe-right:  env(safe-area-inset-right, 0);
            --safe-bottom: env(safe-area-inset-bottom, 0);
            --safe-left:   env(safe-area-inset-left, 0);
        }

        html { -webkit-text-size-adjust: 100%; }
        body {
            background: var(--bg); color: var(--text-primary);
            font-family: var(--font-body); font-size: 14px; min-height: 100vh;
            -webkit-tap-highlight-color: rgba(37,99,235,0.1);
        }

        .nav {
            position: sticky; top: 0; z-index: 100;
            background: rgba(255,255,255,0.92); backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            padding: 0 max(1.25rem, calc(1.25rem + var(--safe-left)));
            padding-right: max(1.25rem, calc(1.25rem + var(--safe-right)));
            padding-top: var(--safe-top);
            min-height: 44px; display: flex; align-items: center; gap: 0.4rem; flex-wrap: wrap;
        }
        .nav a { color: var(--text-secondary); text-decoration: none; font-size: 0.75rem; font-weight: 500; padding: 0.5rem 0.35rem; min-height: 44px; display: inline-flex; align-items: center; transition: color .15s; -webkit-tap-highlight-color: transparent; }
        .nav a:hover { color: var(--accent); }
        .nav a.is-active { color: var(--accent); font-weight: 600; }
        .nav-sep { color: var(--text-muted); font-size: 0.7rem; }
        .nav-current { color: var(--accent); font-size: 0.75rem; font-weight: 600; }

        .page {
            max-width: 820px; margin: 0 auto;
            padding: 1.25rem max(1.25rem, calc(1.25rem + var(--safe-right))) max(3rem, calc(3rem + var(--safe-bottom))) max(1.25rem, calc(1.25rem + var(--safe-left)));
        }

        .proceso-band {
            display: flex; align-items: center; gap: 0.6rem;
            background: var(--surface); border: 1px solid var(--border);
            border-left: 3px solid var(--accent); border-radius: var(--radius);
            padding: 0.55rem 0.85rem; margin-bottom: 1rem;
            animation: fadeUp 0.3s ease both;
        }
        .proceso-icon { width: 30px; height: 30px; border-radius: 6px; flex-shrink: 0; background: var(--accent-light); border: 1px solid rgba(37,99,235,.15); display: flex; align-items: center; justify-content: center; color: var(--accent); font-size: 0.8rem; }
        .proceso-content { flex: 1; min-width: 0; }
        .proceso-overline { font-size: 0.58rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: var(--accent); margin-bottom: 0.06rem; display: block; }
        .proceso-title { font-size: 0.78rem; font-weight: 600; color: var(--text-primary); line-height: 1.2; }
        .proceso-desc  { font-size: 0.67rem; color: var(--text-muted); margin-top: 0.05rem; }
        .proceso-steps { display: flex; align-items: center; gap: 0.25rem; flex-shrink: 0; }
        .proceso-step { display: flex; align-items: center; justify-content: center; width: 20px; height: 20px; border-radius: 50%; font-size: 0.58rem; font-weight: 700; border: 1px solid var(--border); color: var(--text-muted); background: var(--surface-2); }
        .proceso-step.is-active { background: var(--accent); color: #fff; border-color: var(--accent); box-shadow: 0 0 0 2px rgba(37,99,235,.15); }
        .proceso-step-sep { font-size: 0.55rem; color: var(--border-2); }

        .page-header { display: flex; align-items: flex-start; justify-content: space-between; gap: 1rem; margin-bottom: 1rem; animation: fadeUp 0.35s ease 0.05s both; }
        .page-title { font-family: var(--font-display); font-size: clamp(1.25rem, 3.5vw, 1.75rem); font-weight: 400; line-height: 1.15; color: var(--text-primary); }
        .page-subtitle { font-size: 0.72rem; color: var(--text-muted); margin-top: 0.2rem; }
        .page-subtitle strong { color: var(--text-secondary); font-weight: 600; }
        .btn-nuevo { display: inline-flex; align-items: center; gap: 0.4rem; font-size: 0.78rem; font-weight: 600; padding: 0.5rem 1rem; min-height: 44px; border-radius: 6px; border: none; cursor: pointer; background: var(--accent); color: #fff; text-decoration: none; flex-shrink: 0; box-shadow: 0 1px 3px rgba(37,99,235,.3); transition: background .15s, box-shadow .15s; -webkit-tap-highlight-color: transparent; }
        .btn-nuevo:hover { background: #1d4ed8; box-shadow: 0 3px 8px rgba(37,99,235,.35); }

        .toolbar { display: flex; align-items: center; gap: 0.6rem; margin-bottom: 1rem; flex-wrap: wrap; animation: fadeUp 0.35s ease 0.1s both; }
        .search-wrap { position: relative; flex: 1; min-width: 180px; }
        .search-icon { position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%); color: var(--text-muted); font-size: 0.75rem; pointer-events: none; }
        .search-input { width: 100%; padding: 0.55rem 0.75rem 0.55rem 2.15rem; min-height: 42px; border: 1px solid var(--border); border-radius: 6px; background: var(--surface); color: var(--text-primary); font-family: var(--font-body); font-size: 0.82rem; box-shadow: var(--shadow); transition: border-color .15s, box-shadow .15s; outline: none; }
        .search-input:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(37,99,235,.1); }
        .search-input::placeholder { color: var(--text-muted); }
        .count-badge { font-family: var(--font-mono); font-size: 0.68rem; font-weight: 600; color: var(--text-muted); white-space: nowrap; background: var(--surface); border: 1px solid var(--border); border-radius: 20px; padding: 0.25rem 0.65rem; box-shadow: var(--shadow); }

        .list-wrap { display: flex; flex-direction: column; gap: 0.55rem; }

        .card {
            display: block;
            background: var(--surface); border: 1px solid var(--border);
            border-radius: var(--radius); box-shadow: var(--shadow);
            overflow: hidden; transition: box-shadow .15s, border-color .15s;
            animation: fadeUp 0.35s ease both;
        }
        .card:hover { box-shadow: var(--shadow-md); border-color: var(--border-2); }
        .card-stripe { display: block; height: 2px; background: var(--accent); opacity: 0.5; }
        .card-body { display: block; padding: 0.85rem 1rem 0.8rem; }
        .card-top { display: flex; align-items: flex-start; justify-content: space-between; gap: 0.75rem; margin-bottom: 0.55rem; }
        .card-name { font-family: var(--font-display); font-size: clamp(1rem, 2.8vw, 1.18rem); font-weight: 400; line-height: 1.2; color: var(--text-primary); flex: 1; min-width: 0; }
        .card-hero { text-align: right; flex-shrink: 0; background: var(--accent-light); border: 1px solid rgba(37,99,235,.15); border-radius: 6px; padding: 0.35rem 0.65rem; position: relative; overflow: hidden; }
        .card-hero::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: var(--accent); }
        .card-hero-label { font-size: 0.56rem; font-weight: 700; letter-spacing: 0.08em; text-transform: uppercase; color: var(--text-muted); display: block; margin-bottom: 0.06rem; }
        .card-hero-val { font-family: var(--font-display); font-size: clamp(1rem, 3vw, 1.25rem); color: var(--accent); line-height: 1; }
        .card-badges { display: flex; align-items: center; gap: 0.35rem; margin-bottom: 0.55rem; flex-wrap: wrap; }
        .badge-tipo { display: inline-flex; align-items: center; gap: 0.25rem; font-size: 0.63rem; font-weight: 600; letter-spacing: 0.04em; text-transform: uppercase; padding: 0.14rem 0.45rem; border-radius: 4px; color: var(--accent); border: 1px solid rgba(37,99,235,.2); background: var(--accent-light); }
        .card-rend { display: inline-flex; align-items: center; gap: 0.3rem; font-size: 0.67rem; color: var(--text-secondary); background: var(--green-dim); border: 1px solid rgba(22,163,74,.15); border-radius: 20px; padding: 0.18rem 0.6rem; }
        .card-rend i { font-size: 0.6rem; color: var(--green); }
        .card-metrics { display: grid; grid-template-columns: repeat(4, 1fr); gap: 0 0.5rem; margin-top: 0.65rem; }
        .metric-card { border-top: 2px solid transparent; padding: 0.5rem 0.6rem 0.45rem; border-radius: 6px; background: var(--surface-2); }
        .metric-card:nth-child(1) { border-color: var(--accent); }
        .metric-card:nth-child(2) { border-color: var(--green); }
        .metric-card:nth-child(3) { border-color: var(--amber); }
        .metric-card:nth-child(4) { border-color: var(--amber); }
        .metric-label { font-size: 0.58rem; font-weight: 600; letter-spacing: 0.05em; text-transform: uppercase; color: var(--text-muted); display: flex; align-items: center; gap: 0.22rem; margin-bottom: 0.22rem; line-height: 1.2; }
        .metric-val { font-family: var(--font-mono); font-size: 0.78rem; font-weight: 600; color: var(--text-primary); }
        .metric-val--accent { color: var(--accent); }
        .metric-val--green  { color: var(--green); }
        .metric-val--amber  { color: var(--amber); }
        .metric-val--muted  { color: var(--text-muted); font-weight: 400; font-style: italic; }
        .card-footer { border-top: 1px solid var(--border); padding: 0.5rem 1rem; display: flex; align-items: center; gap: 0.5rem; background: var(--surface-2); flex-wrap: wrap; }
        .btn-ver { display: inline-flex; align-items: center; gap: 0.35rem; font-size: 0.73rem; font-weight: 600; padding: 0.42rem 0.85rem; min-height: 38px; border-radius: 5px; border: none; cursor: pointer; background: var(--accent); color: #fff; text-decoration: none; box-shadow: 0 1px 2px rgba(37,99,235,.2); transition: background .15s; -webkit-tap-highlight-color: transparent; }
        .btn-ver:hover { background: #1d4ed8; }
        .btn-editar { display: inline-flex; align-items: center; gap: 0.35rem; font-size: 0.73rem; font-weight: 500; padding: 0.42rem 0.85rem; min-height: 38px; border-radius: 5px; border: 1px solid var(--border-2); color: var(--text-secondary); background: var(--surface); text-decoration: none; transition: all .15s; -webkit-tap-highlight-color: transparent; }
        .btn-editar:hover { color: var(--accent); border-color: rgba(37,99,235,.3); background: var(--accent-light); }
        .placeholder { text-align: center; padding: 2.5rem 1rem; color: var(--text-muted); font-size: 0.82rem; background: var(--surface); border: 1px solid var(--border); border-radius: var(--radius); box-shadow: var(--shadow); }
        .placeholder i { font-size: 1.4rem; display: block; margin-bottom: 0.6rem; opacity: 0.35; }

        @media (max-width: 600px) {
            .page { padding: 1rem max(0.9rem, calc(0.9rem + var(--safe-right))) max(2.5rem, calc(2.5rem + var(--safe-bottom))) max(0.9rem, calc(0.9rem + var(--safe-left))); }
            .nav { padding-left: max(0.9rem, calc(0.9rem + var(--safe-left))); padding-right: max(0.9rem, calc(0.9rem + var(--safe-right))); }
            .nav a { padding: 0.5rem 0.3rem; font-size: 0.7rem; min-width: 0; }
            .proceso-band { flex-wrap: wrap; gap: 0.5rem; }
            .proceso-steps { order: -1; width: 100%; justify-content: flex-start; }
            .proceso-icon { width: 26px; height: 26px; font-size: 0.72rem; }
            .page-header { flex-direction: column; gap: 0.75rem; align-items: stretch; }
            .page-title { font-size: 1.15rem; }
            .btn-nuevo { justify-content: center; }
            .toolbar { gap: 0.5rem; }
            .search-wrap { min-width: 0; flex: 1 1 100%; }
            .search-input { min-height: 44px; font-size: 16px; }
            .count-badge { padding: 0.3rem 0.6rem; }
            .list-wrap { gap: 0.65rem; }
            .card { display: block; min-width: 0; }
            .card-top { display: flex; flex-direction: column; gap: 0.5rem; align-items: stretch; }
            .card-name { min-width: 0; word-break: break-word; }
            .card-hero { display: block; text-align: left; align-self: flex-start; min-width: 0; }
            .card-badges { display: flex; flex-wrap: wrap; gap: 0.35rem; }
            .card-metrics { display: grid; grid-template-columns: repeat(2, 1fr); -ms-grid-columns: 1fr 1fr; gap: 0.45rem; }
            .card-metrics .metric-card { display: block; padding: 0.45rem 0.5rem 0.4rem; min-width: 0; }
            .card-footer { display: flex; padding: 0.55rem 0.75rem; gap: 0.4rem; flex-wrap: wrap; }
            .btn-ver, .btn-editar { flex: 1 1 0; min-width: 120px; justify-content: center; min-height: 44px; }
        }
        @media (max-width: 400px) {
            .page { padding: 0.85rem max(0.65rem, calc(0.65rem + var(--safe-right))) max(2rem, calc(2rem + var(--safe-bottom))) max(0.65rem, calc(0.65rem + var(--safe-left))); }
            .card-body { padding: 0.7rem 0.85rem 0.65rem; }
            .card-metrics .metric-card { padding: 0.4rem 0.45rem; }
        }

        @keyframes fadeUp {
            from { opacity: 0; transform: translateY(8px); }
            to   { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

<nav class="nav costos-nav" id="armador-receta-nav" aria-label="Navegación principal"></nav>

<main class="page">

    <div class="proceso-band">
        <div class="proceso-icon"><i class="fa-solid fa-wheat-awn"></i></div>
        <div class="proceso-content">
            <span class="proceso-overline">Proceso · Etapa 1 de 4</span>
            <div class="proceso-title">Costeo de la Masa en Base a la Receta</div>
            <div class="proceso-desc">Insumos, costos directos y rendimiento por unidad de cada masa base.</div>
        </div>
        <div class="proceso-steps">
            <span class="proceso-step is-active" title="Masa Base">1</span>
            <span class="proceso-step-sep">›</span>
            <span class="proceso-step" title="Producto Compuesto">2</span>
            <span class="proceso-step-sep">›</span>
            <span class="proceso-step" title="Producto Unitario">3</span>
            <span class="proceso-step-sep">›</span>
            <span class="proceso-step" title="Precio Final">4</span>
        </div>
    </div>

    <div class="page-header">
        <div>
            <h1 class="page-title">Recetas Base de la Masa</h1>
            <p class="page-subtitle">Hoja <strong>Tabla-Receta-Base</strong></p>
        </div>
        <a href="#" id="btn-nuevo-receta-base" class="btn-nuevo">
            <i class="fa-solid fa-plus"></i> Nuevo
        </a>
    </div>

    <div class="toolbar">
        <div class="search-wrap">
            <i class="fa-solid fa-magnifying-glass search-icon"></i>
            <input type="search" id="filter-receta-base" class="search-input"
                   placeholder="Buscar receta…" autocomplete="off" aria-label="Buscar receta">
        </div>
        <span class="count-badge" id="receta-base-count" aria-live="polite">—</span>
    </div>

    <div id="datos-receta-base" class="list-wrap">
        <div class="placeholder">
            <i class="fa-solid fa-spinner fa-spin"></i>
            Cargando recetas…
        </div>
    </div>

</main>

<script src="../armador-receta-nav.js"></script>
<script src="../../Arquitectura/sheets/receta-base/receta-base-config.js"></script>
<script src="receta-base.js?v=2"></script>
</body>
</html>
